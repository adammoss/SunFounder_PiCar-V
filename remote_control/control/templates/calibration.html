{% extends "base.html" %}

{% block title %} Calibration {% endblock %}

{% block content %}

<b-container>

    <b-card
        border-variant="default"
        class="m-4"
    >

        <h5 class="text-center">Current Vehicle Configuration</h5>

        <b-row cols="12" class="text-center m-4">
            <b-table striped hover small fixed caption-top :items="config">
            </b-table>
        </b-row>

        <b-row>
            <b-col cols="6">

                <b-row class="text-center">
                    <b-col cols="12" class="my-2">
                        <h5>Camera</h5>
                    </b-col>
                    <b-col cols="12">
                        <b-button variant="outline-primary" class="m-2" size="lg" @click="calibrateCar('camcaliup')">Up</b-button>
                    </b-col>
                    <b-col cols="12">
                        <b-button variant="outline-primary" class="m-2" size="lg" @click="calibrateCar('camcalileft')">Left</b-button>
                        <b-button variant="outline-primary" class="m-2" size="lg" @click="calibrateCar('camcaliright')">Right</b-button>
                    </b-col>
                    <b-col cols="12">
                        <b-button variant="outline-primary" class="m-2" size="lg" @click="calibrateCar('camcalidown')">Down</b-button>
                    </b-col>
                </b-row>

            </b-col>

            <b-col cols="6">

                <b-row class="text-center">
                    <b-col cols="12" class="my-2">
                        <h5>Front Wheels</h5>
                    </b-col>
                    <b-col cols="12">
                        <b-button variant="outline-primary" class="m-2" size="lg" @click="calibrateCar('fwcalileft')">Left</b-button>
                        <b-button variant="outline-primary" class="m-2" size="lg" @click="calibrateCar('fwcaliright')">Right</b-button>
                    </b-col>
                      <b-col cols="12" class="my-2">
                          <h5>Back Wheels</h5>
                    </b-col>
                    <b-col cols="12">
                        <b-button variant="outline-primary" class="m-2" size="lg" @click="calibrateCar('bwcalileft')">Left</b-button>
                        <b-button variant="outline-primary" class="m-2" size="lg" @click="calibrateCar('bwcaliright')">Right</b-button>
                    </b-col>

                </b-row>

            </b-col>

            <b-button block variant="success" size="lg" @click="calibrateCar('calisave')" class="my-4">Save Settings</b-button>

    </b-card>

</b-container>

{% endblock %}

{% block app %}

<script>
    window.app = new Vue({
        el: '#app',
        delimiters: ['[[', ']]'],
        data: {
            config: [],
        },
        computed: {},
        mounted() {
            this.calibrateCar('camcali');
            this.calibrateCar('fwcali');
            this.calibrateCar('bwcali');
            this.getConfig();
        },
        methods: {
             getConfig() {
                axios.get('/config/').then((response) => {
                    this.config = response.data;
                }).catch((err) => {
                })
            },
            calibrateCar(value) {
                 const data = {
                    action: value,
                };
                axios.post('/car/', data).then((response) => {
                    if (value === 'calisave') {
                        this.getConfig()
;                    }
                }).catch((err) => {
                })
            },
        },
    })

</script>

{% endblock %}